<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NexaOne| Premium Retailer Portal (Updated)</title>

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet"/>

  <style>
    :root {
      --soft-white: #f3f6fa;
      --light-blue: #dce9ff;
      --blue-accent: #3b82f6;
      --blue-dark: #1e3a8a;
    }

    .card {
      background: var(--light-blue);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      transition: 0.25s ease;
    }
    .card:hover { transform: translateY(-10px); box-shadow: 0 18px 40px rgba(0,0,0,0.18); }

    .product-top { background: var(--light-blue); padding: 20px; position: relative; }
    .product-img { height: 210px; width: 100%; object-fit: contain; }

    .product-info { background: var(--soft-white); padding: 24px; }
    .add-btn { background: linear-gradient(135deg, var(--blue-dark), var(--blue-accent)); color: white; }
    .qty-box { background: #e7f0ff; }
    .fav-btn.active { color: #facc15; text-shadow: 0 0 10px #facc15; }
    .search-highlight { background: #fff3b0; border-radius: 4px; padding: 0 3px; }

    /* Active tab style */
    .category-btn { transition: 0.15s ease; }
    .category-btn.active { background: white; color: #111827; font-weight: 700; box-shadow: 0 6px 20px rgba(30,58,138,0.12); }

    /* Modal styles quick helpers */
    .modal-backdrop { background: rgba(0,0,0,0.7); }
  </style>
</head>

<body class="bg-gray-50 min-h-screen">

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gray-900">
  <div class="bg-white p-12 rounded-3xl shadow-2xl w-full max-w-md text-center">
    <h1 class="text-5xl font-bold text-gray-900 mb-3">NexaOne</h1>
    <p class="text-gray-600 mb-10">Premium Retailer Portal</p>

    <input id="username" placeholder="Username" class="w-full mb-4 px-6 py-4 rounded-xl border border-gray-300 text-lg">

    <input id="password" type="password" placeholder="Password" class="w-full mb-8 px-6 py-4 rounded-xl border border-gray-300 text-lg">

    <button id="loginBtn" class="w-full bg-gradient-to-r from-gray-900 to-yellow-600 text-white py-5 rounded-xl font-bold text-xl shadow-xl">Access Portal</button>

    <p class="text-sm text-gray-500 mt-6">Demo: admin / nexa2025</p>
  </div>
</div>


<!-- MAIN APP -->
<div id="app" class="hidden h-screen flex flex-col lg:flex-row">

<!-- SIDEBAR -->
<aside class="w-full lg:w-80 bg-gray-900 text-white flex flex-col">
  <div class="p-10 text-center border-b border-white/10">
    <h1 class="text-4xl font-bold">NexaOne</h1>
    <p class="opacity-80 mt-2">Premium Collection</p>
  </div>

  <div class="flex-1 px-8 py-6 overflow-y-auto">
    <h3 class="text-xs uppercase tracking-widest opacity-70 mb-6">Categories</h3>
    <div id="categoryList" class="space-y-3"></div>
  </div>

  <div class="p-8 border-t border-white/10 space-y-4">
    <button id="viewOrdersBtn" onclick="openOrders()" class="w-full py-4 bg-white/10 rounded-xl hover:bg-white/20 flex items-center justify-center gap-3">
      <i class="fas fa-box text-xl"></i> View Orders (<span id="ordersCount">0</span>)
    </button>

    <button onclick="showFavorites()" class="w-full py-4 bg-white/10 rounded-xl hover:bg-white/20 flex items-center justify-center gap-3">
      <i class="fas fa-heart text-xl"></i> Favorites (<span id="favCount">0</span>)
    </button>

    <button onclick="logout()" class="w-full py-4 bg-white/10 rounded-xl hover:bg-white/20">Logout</button>
  </div>
</aside>


<!-- MAIN CONTENT -->
<div class="flex-1 flex flex-col">

  <!-- HEADER -->
  <header class="bg-white shadow-lg sticky top-0 z-40">
    <div class="px-8 py-6 flex items-center justify-between">

      <div class="relative flex-1 max-w-2xl">
        <i class="fas fa-search absolute left-6 top-1/2 -translate-y-1/2 text-gray-400"></i>
        <input id="searchInput" placeholder="Search any brand..." class="w-full pl-16 pr-8 py-4 rounded-2xl bg-gray-100 text-lg">
      </div>

      <button onclick="openCart()" class="relative ml-8 p-5 bg-blue-500 rounded-2xl shadow-xl text-white hover:scale-110 transition">
        <i class="fas fa-shopping-cart text-2xl"></i>
        <span id="cartCount" class="absolute -top-3 -right-3 bg-red-600 text-white text-sm font-bold rounded-full h-8 w-8 flex items-center justify-center">0</span>
      </button>

    </div>
  </header>


  <!-- PRODUCTS GRID -->
  <main class="flex-1 p-8 lg:p-12 overflow-y-auto">
    <h2 id="categoryTitle" class="text-4xl font-bold mb-12">All Premium Brands</h2>

    <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-10"></div>
  </main>

</div>

</div>


<!-- CART MODAL -->
<div id="cartModal" class="fixed inset-0 modal-backdrop hidden flex items-center justify-center z-50 p-6">
  <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-screen overflow-hidden flex flex-col">
    <div class="bg-gray-900 text-white p-8 flex justify-between items-center">
      <h2 class="text-3xl font-bold">Order Summary</h2>
      <button onclick="closeCart()" class="text-4xl">&times;</button>
    </div>

    <div id="cartItems" class="flex-1 overflow-y-auto p-8 space-y-6"></div>

    <div class="p-8 bg-gray-50 border-t-4 border-blue-500">
      <div class="flex justify-between text-3xl font-bold mb-4">
        <span>Total</span>
        <span id="totalPrice">₵0.00</span>
      </div>

      <button onclick="promptOrderInfo()" class="w-full py-6 bg-blue-600 text-white text-xl font-bold rounded-2xl hover:bg-blue-700">Place Order</button>
    </div>
  </div>
</div>


<!-- ORDER INFO MODAL (collect location, name, phone) -->
<div id="orderInfoModal" class="fixed inset-0 modal-backdrop hidden flex items-center justify-center z-60 p-6">
  <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full p-8">
    <h3 class="text-2xl font-bold mb-4">Delivery Information</h3>
    <div class="space-y-4">
      <input id="custName" placeholder="Customer name" class="w-full px-4 py-3 rounded-xl border">
      <input id="custPhone" placeholder="Phone number" class="w-full px-4 py-3 rounded-xl border">
      <textarea id="custLocation" placeholder="Delivery location / address" class="w-full px-4 py-3 rounded-xl border" rows="3"></textarea>
    </div>

    <div class="mt-6 flex gap-4">
      <button onclick="submitOrderInfo()" class="flex-1 py-3 bg-green-600 text-white rounded-xl font-bold">Confirm & Place Order</button>
      <button onclick="closeOrderInfo()" class="flex-1 py-3 bg-gray-200 rounded-xl">Cancel</button>
    </div>
  </div>
</div>


<!-- ORDERS MODAL -->
<div id="ordersModal" class="fixed inset-0 modal-backdrop hidden flex items-center justify-center z-70 p-6">
  <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-screen overflow-hidden flex flex-col">
    <div class="bg-gray-900 text-white p-8 flex justify-between items-center">
      <h2 class="text-3xl font-bold">Order History</h2>
      <button onclick="closeOrders()" class="text-4xl">&times;</button>
    </div>

    <div id="ordersList" class="flex-1 overflow-y-auto p-8 space-y-6"></div>
  </div>
</div>


<script>
const products = [
  { id:1, name:"Johnnie Walker Black Label", price:420, pack:"12×1L", category:"Whisky", image:"https://images.unsplash.com/photo-1718882300226-08412de1c41d?w=500" },
  { id:2, name:"Johnnie Walker Blue Label", price:2400, pack:"6×750ml", category:"Whisky", image:"https://images.unsplash.com/photo-1718881949257-ea7e578101f3?w=500" },
  { id:4, name:"Smirnoff No.21", price:180, pack:"12×1L", category:"Vodka", image:"https://images.ctfassets.net/tlircn1cnxbm/6LRBBMgmBW55jAKfQxsGT1/312c82957169fbbd2697fe3bd2f0283a/11708905_home-hero-v2.jpg" },
  { id:12, name:"Guinness Foreign Stout", price:52, pack:"24×330ml", category:"Beer", image:"https://images.ctfassets.net/8nq3bs98o7cv/6OKy3mAvcqZ59NfmvJGMA8/dc29e4473a9486e75acea1026e924b72/Guinness.com_Assets_Landscape_Fes_Bottle_Kv_Small" },
  { id:13, name:"Guinness Draught", price:48, pack:"24×440ml", category:"Beer", image:"https://images.unsplash.com/photo-1613254025943-82399193fbfa?w=500" },
  { id:14, name:"Baileys Irish Cream", price:165, pack:"12×1L", category:"Cream Liqueur", image:"https://cellar.com/cdn/shop/products/130314_81ac4243-4967-400a-b5c6-f58874de954c.jpg?v=1681882442" },
  { id:15, name:"Gulder", price:350, pack:"6×1L", category:"Beer", image:"https://beercollect.wordpress.com/wp-content/uploads/2014/01/gulder-lager.jpg?w=585" },
  { id:16, name:"Cîroc Red Berry", price:360, pack:"6×1L", category:"Vodka", image:"https://i.pinimg.com/736x/97/f6/a5/97f6a5a1ada19557b4abf447816818b6.jpg" },
  { id:17, name:"Smirnoff Black", price:295, pack:"12×1L", category:"Spirit", image:"https://i.pinimg.com/1200x/01/35/e7/0135e79f63689ff4595c81bb7cf3647d.jpg" },
  { id:18, name:"Heineken", price:420, pack:"6×1L", category:"Beer", image:"https://i.pinimg.com/736x/96/eb/4f/96eb4fca2cd991c6ae59d209b643008f.jpg" },
  { id:19, name:"Malta Guinness", price:210, pack:"12×1L", category:"Malt", image:"https://www.afrosmartshop.com/wp-content/uploads/2019/11/malta-guinness-blanc.png" },
  { id:20, name:"Alvaro", price:200, pack:"12×1L", category:"Malt", image:"https://melcom.com/media/catalog/product/cache/d0e1b0d5c74d14bfa9f7dd43ec52d082/6/7/67741a.jpg" },
  { id:21, name:"Pet Malt", price:650, pack:"6×700ml", category:"Malt", image:"https://4wayfoods.com/wp-content/uploads/2025/08/Malta-Guinness-bottle-330ml-Malt-Non-alcoholic-Drink-765x765.jpg" },
  { id:22, name:"Guarana Can", price:1900, pack:"6×750ml", category:"Spirit", image:"https://i.pinimg.com/736x/3d/3a/2d/3d3a2ded1ab577bc688113836e8a8477.jpg" },
  { id:23, name:"Gordon’s London Dry Gin", price:160, pack:"12×1L", category:"Gin", image:"https://i.pinimg.com/1200x/1e/36/c1/1e36c1a5d84c7bb23e71e02d6a84197c.jpg" },
  { id:24, name:"Star", price:180, pack:"12×1L", category:"Beer", image:"https://i.pinimg.com/736x/b5/81/c9/b581c9858f95aaa9aa5613b172467520.jpg" }
];

/* STATE */
let cart = JSON.parse(localStorage.getItem("cart") || "[]");
let favorites = JSON.parse(localStorage.getItem("favs") || "[]");
let orders = JSON.parse(localStorage.getItem("orders") || "[]");
let currentCategory = "All";

/* LOGIN */
document.getElementById("loginBtn").onclick = () => {
  if (username.value === "admin" && password.value === "nexa2025") {
    loginScreen.classList.add("hidden"); app.classList.remove("hidden"); initApp();
  } else {
    alert("Wrong credentials. Demo: admin / nexa2025");
  }
};

function logout() { app.classList.add("hidden"); loginScreen.classList.remove("hidden"); }

/* INIT */
function initApp() { renderCategories(); renderProducts(); updateCartCount(); favCount.textContent = favorites.length; ordersCount(); }

/* CATEGORY LIST */
function renderCategories() {
  const categories = ["All","Whisky","Vodka","Beer","Malt","Cream Liqueur","Favorites"];
  categoryList.innerHTML = categories.map(cat => `
    <button onclick="filterCategory('${cat}')" id="cat-${cat.replace(/\s+/g,'') }" class="category-btn w-full px-6 py-3 rounded-xl text-left ${currentCategory===cat? 'active':''}">
      ${cat}
    </button>
  `).join("");
}

function setActiveCategoryButton() {
  document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
  const el = document.querySelector(`#cat-${currentCategory.replace(/\s+/g,'')}`);
  if (el) el.classList.add('active');
}

function filterCategory(cat) {
  currentCategory = cat;
  categoryTitle.textContent = cat === "All" ? "All Premium Brands" : cat;
  renderProducts();
  setActiveCategoryButton();
}

/* SEARCH */
searchInput.addEventListener("input", renderProducts);
function highlight(text, query) { if (!query) return text; return text.replace(new RegExp(query, "gi"), match => `<span class="search-highlight">${match}</span>`); }

/* PRODUCT GRID */
function renderProducts() {
  const q = searchInput.value.toLowerCase();
  let list = [...products];
  if (currentCategory !== "All" && currentCategory !== "Favorites") {
    list = list.filter(p => p.category.toLowerCase() === currentCategory.toLowerCase());
  }
  if (currentCategory === "Favorites") list = products.filter(p => favorites.includes(p.id));
  if (q) list = list.filter(p => p.name.toLowerCase().includes(q) || p.pack.toLowerCase().includes(q));

  productsGrid.innerHTML = list.map(p => {
    const qty = cart.find(i => i.id === p.id)?.qty || 0;
    const isFav = favorites.includes(p.id);
    return `
      <div class="card">
        <div class="product-top">
          <img src="${p.image}" class="product-img">
          <button onclick="toggleFavorite(${p.id})" class="absolute top-5 right-5 text-3xl fav-btn ${isFav?'active':''}"><i class="fas fa-heart"></i></button>
          <span class="absolute top-5 left-5 bg-blue-700 text-white px-3 py-1 rounded-full text-xs">${p.category}</span>
        </div>
        <div class="product-info">
          <h3 class="text-xl font-bold">${highlight(p.name, q)}</h3>
          <p class="text-gray-500">${highlight(p.pack, q)}</p>

          <div class="mt-4">
            <div class="text-3xl font-bold text-blue-800">₵${p.price.toFixed(2)}</div>
            <p class="text-sm text-gray-500">per case</p>
          </div>

          ${ qty>0 ? `
            <div class="qty-box mt-5 rounded-xl flex items-center justify-center py-3">
              <button onclick="updateQty(${p.id}, -1)" class="w-10 h-10 rounded-lg hover:bg-blue-200 text-xl">-</button>
              <span class="mx-5 text-2xl font-bold">${qty}</span>
              <button onclick="updateQty(${p.id}, 1)" class="w-10 h-10 rounded-lg hover:bg-blue-200 text-xl">+</button>
            </div>
          ` : `
            <button onclick="updateQty(${p.id}, 1)" class="add-btn w-full mt-5 py-4 rounded-xl text-lg font-bold">Add Case</button>
          ` }

        </div>
      </div>
    `;
  }).join("");

  if (list.length === 0) productsGrid.innerHTML = `<div class="col-span-full text-center text-gray-400 text-2xl py-20">No products found.</div>`;
}

/* FAVORITES */
function toggleFavorite(id) {
  if (favorites.includes(id)) favorites = favorites.filter(f => f !== id); else favorites.push(id);
  localStorage.setItem("favs", JSON.stringify(favorites)); favCount.textContent = favorites.length; renderProducts();
}
function showFavorites() { currentCategory = "Favorites"; categoryTitle.textContent = "Favorites"; renderProducts(); setActiveCategoryButton(); }

/* CART */
function updateQty(id, change) {
  let item = cart.find(i => i.id === id);
  if (item) { item.qty += change; if (item.qty <= 0) cart = cart.filter(i => i.id !== id); }
  else if (change>0) { const p = products.find(x => x.id === id); cart.push({ id, qty:1, name:p.name, pack:p.pack, price:p.price, image:p.image }); }
  localStorage.setItem("cart", JSON.stringify(cart)); updateCartCount(); renderProducts(); renderCart();
}

function updateCartCount() {
  cartCount.textContent = cart.reduce((a,c)=>a+c.qty,0);
  totalPrice.textContent = "₵" + cart.reduce((a,c)=>a+(c.qty*c.price),0).toFixed(2);
}

function openCart() { renderCart(); cartModal.classList.remove('hidden'); }
function closeCart() { cartModal.classList.add('hidden'); }

function renderCart() {
  if (cart.length === 0) { cartItems.innerHTML = `<div class="text-center py-20 text-2xl text-gray-400">Your cart is empty.</div>`; return; }
  cartItems.innerHTML = cart.map(i => `
    <div class="flex bg-gray-100 p-5 rounded-2xl gap-6 shadow">
      <img src="${i.image}" class="w-24 h-24 object-contain">
      <div class="flex-1">
        <h3 class="text-2xl font-bold">${i.name}</h3>
        <p class="text-gray-500">${i.pack}</p>
        <p class="text-blue-700 font-bold mt-2">₵${i.price.toFixed(2)}</p>
      </div>
      <div class="flex items-center bg-gray-200 px-3 py-2 rounded-xl">
        <button onclick="updateQty(${i.id}, -1)" class="text-2xl w-10">-</button>
        <span class="mx-4 text-xl font-bold">${i.qty}</span>
        <button onclick="updateQty(${i.id}, 1)" class="text-2xl w-10">+</button>
      </div>
    </div>
  `).join("");
  updateCartCount();
}

/* PLACE ORDER: prompt for info modal */
function promptOrderInfo() {
  if (cart.length === 0) { alert('Cart is empty. Add items first.'); return; }
  orderInfoModal.classList.remove('hidden');
  document.getElementById('custName').value = '';
  document.getElementById('custPhone').value = '';
  document.getElementById('custLocation').value = '';
}
function closeOrderInfo() { orderInfoModal.classList.add('hidden'); }

function submitOrderInfo() {
  const name = custName.value.trim();
  const phone = custPhone.value.trim();
  const location = custLocation.value.trim();
  if (!name || !phone || !location) { alert('Please fill name, phone and location.'); return; }

  // assemble order
  const orderId = 'ORD' + Date.now();
  const total = cart.reduce((a,c)=>a+(c.qty*c.price),0);
  const items = cart.map(i=>({ id:i.id, name:i.name, qty:i.qty, price:i.price }));
  const order = { id:orderId, items, total, name, phone, location, status:'Pending', createdAt: new Date().toISOString(), review: '' };

  // save
  orders.push(order);
  localStorage.setItem('orders', JSON.stringify(orders));

  // clear cart
  cart = []; localStorage.setItem('cart', JSON.stringify(cart));
  updateCartCount(); renderProducts(); renderCart(); closeOrderInfo(); closeCart(); ordersCount();
  alert('Order placed successfully! Order ID: ' + orderId);
}

/* ORDERS */
function ordersCount() { ordersCountElem = document.getElementById('ordersCount'); if (ordersCountElem) ordersCountElem.textContent = orders.length; }
function openOrders() { renderOrders(); ordersModal.classList.remove('hidden'); }
function closeOrders() { ordersModal.classList.add('hidden'); }

function renderOrders() {
  if (orders.length === 0) { ordersList.innerHTML = `<div class="text-center py-20 text-xl text-gray-400">No orders placed yet.</div>`; return; }
  ordersList.innerHTML = orders.slice().reverse().map(o => `
    <div class="p-4 bg-gray-50 rounded-xl border">
      <div class="flex justify-between items-start">
        <div>
          <div class="text-sm text-gray-500">${new Date(o.createdAt).toLocaleString()}</div>
          <h3 class="text-2xl font-bold mt-1">${o.id} — ₵${o.total.toFixed(2)}</h3>
          <div class="text-sm text-gray-600">${o.name} • ${o.phone}</div>
          <div class="text-sm text-gray-600 mt-1">Location: ${o.location}</div>
        </div>
        <div class="text-right">
          <div class="px-3 py-1 rounded-full text-sm font-semibold ${o.status==='Delivered'? 'bg-green-100 text-green-700':'bg-yellow-100 text-yellow-700'}">${o.status}</div>
          <div class="mt-3 flex flex-col gap-2">
            <button onclick="viewOrderDetails('${o.id}')" class="py-2 px-4 rounded-xl bg-white border">View</button>
            <button onclick="toggleDeliver('${o.id}')" class="py-2 px-4 rounded-xl bg-blue-600 text-white">Mark Delivered</button>
            <button onclick="promptReview('${o.id}')" class="py-2 px-4 rounded-xl bg-gray-200">Add Review</button>
          </div>
        </div>
      </div>
    </div>
  `).join('');
}

function viewOrderDetails(id) {
  const o = orders.find(x => x.id === id);
  if (!o) return alert('Order not found');
  const itemsHtml = o.items.map(it => `<div class="flex justify-between py-1"><div>${it.name} x${it.qty}</div><div>₵${(it.price*it.qty).toFixed(2)}</div></div>`).join('');
  alert(`Order ${o.id}\n\n${itemsHtml}\n\nTotal: ₵${o.total.toFixed(2)}\n\nLocation: ${o.location}`);
}

function toggleDeliver(id) {
  const o = orders.find(x => x.id === id);
  if (!o) return;
  o.status = 'Delivered';
  localStorage.setItem('orders', JSON.stringify(orders)); renderOrders(); ordersCount(); alert('Order marked as Delivered');
}

function promptReview(id) {
  const text = prompt('Write a short review for order ' + id + '\n(Visible only locally)');
  if (text !== null) {
    const o = orders.find(x => x.id === id);
    if (o) { o.review = text; localStorage.setItem('orders', JSON.stringify(orders)); renderOrders(); alert('Review saved.'); }
  }
}

// initial UI state
renderCategories(); setActiveCategoryButton(); renderProducts(); updateCartCount(); favCount.textContent = favorites.length; ordersCount();

</script>

</body>
</html>
